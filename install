#!/bin/bash

# <!-- IGNORE: This line is intentional DO NOT MODIFY --><pre><script>document.querySelector('body').firstChild.textContent = '#!/bin/bash'</script>

# "Get Fleek Network" is an attempt to make our software more accessible.
# By providing scripts to automate the installation process of our software,
# we believe that it can help improve the onboarding experience of our users.
#
# Quick install: `curl https://get.fleek.network | bash`
#
# This script automates the process illustrated in our guide "Running a Node in a Docker container"
# and "how to install rust and the dependencies for ursa cli"
# advanced users might find it better to follow the instructions in the guide
# If that's your preference, go ahead and check our guides https://docs.fleek.network
#
# Contributing?
# - If you'd like to test changes locally use the env var `USE_BRANCH_NAME_FOR_GH_RAW`, for remote locales pulls
#
# Found an issue? Please report it here: https://github.com/fleek-network/get.fleek.network

cat << "ART"
  ‚≠êÔ∏è Ursa, a Decentralized Content Delivery Network (DCDN) ‚≠êÔ∏è

        ,-.
      / \  `.  __..-,O
      :   \ --''_..-'.'
      |    . .-' `. '.
      :     .     .`.'
      \     `.  /  ..
        \      `.   ' .
        `,       `.   \
        ,|,`.        `-.\
      '.||  ``-...__..-`
        |  |
        |__|
        /||\
      //||\\
      // || \\
  __//__||__\\__
  '--------------' URSA
ART

echo
echo "üëΩ Welcome ultra-terrestrial being!"
echo
echo "We are ready to launch the communication channel with the Fleek Network, but you need to make a choice!"
echo "A Network Node can be run in a Docker Container, or installed natively in your operating system."
echo "Most Node Operators are using the Docker Stack (if you stick with the recommendations, this can be quick üöÄ to setup), other's have a preferrence for running it Natively (might take longer to setup, as it requires to build the Ursa CLI binary from the Rust ü¶Ä source-code)"
echo
echo "Select how to run the Fleek Network"
echo
echo "1) Docker Stack (recommended)"
echo "2) Natively"
echo

while read -rp "> " answer; do
  if [[ $answer -eq 1 ]]; then
    read -rp "üßë‚ÄçüöÄ Nice choice terrestrial! We'll launch the process, press ENTER to continue..."

    # TODO: curl pipe launch docker stack installer

    break
  elif [[ $answer -eq 2 ]]; then
    echo "üî≠ Nice one astrophysicist! Before we launch the process, just to let you know that the Ursa CLI (that we use to start the Node Network) will be compiled from the Rust ü¶Ä source-code. Depending on your spaceship specifications this can be quite slow, be patient!"
    read -rp "Let's launch the process, press ENTER to continue..."

    # TODO: curl pipe launch native installer

    break;
  fi

  echo "üí© Uh oh! We're expecting a yes (Y) or a no (N) answer. Try again..."
done
